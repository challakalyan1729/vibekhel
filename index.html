<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibekhel - Find, Join & Organize Sports</title>
    <link rel="icon" href="https://i.postimg.cc/rwFfPmXf/Picsart-25-07-17-13-57-44-788.jpg" type="image/jpeg">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-main: #121212;
            --bg-card: #1A1A1A;
            --text-primary: #E0E0E0;
            --text-secondary: #A0A0A0;
            --accent-primary: #28a745; /* Emerald Green */
            --accent-gold: #ffc107; /* Gold */
            --border-color: rgba(255, 255, 255, 0.1);
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
        }
        .hero-section-container {
            position: relative;
            z-index: 1;
            background-color: transparent;
            overflow: hidden;
        }
        .hero-section-container::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-image: linear-gradient(rgba(18, 18, 18, 0.7), rgba(18, 18, 18, 1)), url('https://images.unsplash.com/photo-1552667466-07770ae110d0?q=80&w=2070&auto=format&fit=crop');
            background-position: center center;
            background-repeat: no-repeat;
            background-size: cover;
            z-index: -1;
            will-change: transform;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .filter-btn {
            background-color: var(--bg-card);
            color: var(--text-primary);
            border-color: var(--border-color);
        }
        .filter-btn.active {
            background-color: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }
        .nav-link.active {
            color: var(--accent-primary);
            font-weight: 600;
        }
        .mobile-nav-link.active {
             color: var(--accent-primary);
        }
        .modal-content {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            margin: -1px;
            padding: 0;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
        .social-link:hover svg {
             color: var(--accent-gold);
        }
    </style>
</head>
<body class="antialiased pb-16 sm:pb-0">

    <div id="aria-live-region" class="visually-hidden" aria-live="polite" aria-atomic="true"></div>

    <header id="main-header" class="bg-gray-900/80 backdrop-blur-lg sticky top-0 z-40 border-b border-[var(--border-color)]">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="#" data-page="home" class="block">
                    <img src="https://i.postimg.cc/rwFfPmXf/Picsart-25-07-17-13-57-44-788.jpg" alt="Vibekhel Logo" class="h-10 w-auto">
                </a>
                <div class="hidden sm:flex sm:items-center sm:space-x-8">
                    <a href="#" data-page="events-page" class="nav-link text-gray-300 hover:text-[var(--accent-primary)] transition-colors duration-200">Find Games</a>
                    <a href="#" data-page="profile-page" class="nav-link text-gray-300 hover:text-[var(--accent-primary)] transition-colors duration-200">My Profile</a>
                </div>
                <div class="hidden sm:block">
                    <a href="#" data-page="create-event-page" class="inline-block bg-[var(--accent-primary)] text-white font-semibold px-5 py-2 rounded-lg hover:bg-green-500 transition-all duration-200 transform hover:scale-105">Organize a Game</a>
                </div>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <div id="home" class="page active">
            <div class="hero-section-container">
                <section class="relative h-[calc(100vh-4rem)] min-h-[500px] flex items-center justify-center text-center px-4">
                    <div class="z-10">
                        <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight text-white">
                            Find your <span style="color: var(--accent-primary);">vibe</span>. Find your <span style="color: var(--accent-primary);">game</span>.
                        </h1>
                        <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-gray-300">
                            From gully cricket to neighbourhood football, join thousands of players and get back to the games you love.
                        </p>
                        <div class="mt-8">
                            <a href="#" data-page="events-page" class="inline-block bg-[var(--accent-primary)] text-white font-bold text-lg px-8 py-4 rounded-lg shadow-lg hover:bg-green-500 transition-all duration-300 transform hover:scale-105">
                                Explore Games Now
                            </a>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <div id="events-page" class="page">
            <div class="py-12 sm:py-16">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <h1 class="text-3xl sm:text-4xl font-bold text-center mb-2 text-white">Games Happening Near You</h1>
                    <p class="text-center text-gray-400 max-w-2xl mx-auto mb-8">Discover games scheduled for today, this week, or this month. Your next match is just a click away.</p>
                    <div id="filter-bar" class="flex justify-center flex-wrap gap-2 sm:gap-4 mb-8">
                        <button class="filter-btn active text-sm sm:text-base font-semibold px-4 py-2 rounded-full border-2 transition-all duration-200" data-filter="all">All Sports</button>
                        <button class="filter-btn text-sm sm:text-base font-semibold px-4 py-2 rounded-full border-2 transition-all duration-200" data-filter="Cricket">Cricket</button>
                        <button class="filter-btn text-sm sm:text-base font-semibold px-4 py-2 rounded-full border-2 transition-all duration-200" data-filter="Football">Football</button>
                        <button class="filter-btn text-sm sm:text-base font-semibold px-4 py-2 rounded-full border-2 transition-all duration-200" data-filter="Badminton">Badminton</button>
                        <button class="filter-btn text-sm sm:text-base font-semibold px-4 py-2 rounded-full border-2 transition-all duration-200" data-filter="Volleyball">Volleyball</button>
                    </div>
                    <div id="events-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                </div>
            </div>
        </div>

        <div id="create-event-page" class="page">
            <div class="py-12 sm:py-16">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="max-w-2xl mx-auto">
                        <h1 class="text-3xl sm:text-4xl font-bold text-center mb-2 text-white">Organize Your Own Game</h1>
                        <p class="text-center text-gray-400 mb-8">Fill in the details below to create your event and find players to join you on the field.</p>
                        <form id="create-event-form" class="bg-[var(--bg-card)] p-8 rounded-2xl shadow-lg space-y-6 border border-[var(--border-color)]">
                            <div>
                                <label for="event-title" class="block text-sm font-medium text-gray-300 mb-1">Event Title</label>
                                <input type="text" id="event-title" required class="w-full px-4 py-3 bg-gray-800 text-white border border-gray-600 rounded-lg focus:ring-2 focus:ring-[var(--accent-primary)] focus:border-[var(--accent-primary)] transition">
                            </div>
                            <div>
                                <label for="event-sport" class="block text-sm font-medium text-gray-300 mb-1">Sport</label>
                                <select id="event-sport" required class="w-full px-4 py-3 bg-gray-800 text-white border border-gray-600 rounded-lg focus:ring-2 focus:ring-[var(--accent-primary)] focus:border-[var(--accent-primary)] transition">
                                    <option>Cricket</option><option>Football</option><option>Badminton</option><option>Volleyball</option><option>Other</option>
                                </select>
                            </div>
                            <div>
                                <label for="event-location" class="block text-sm font-medium text-gray-300 mb-1">Location / Venue</label>
                                <input type="text" id="event-location" required class="w-full px-4 py-3 bg-gray-800 text-white border border-gray-600 rounded-lg focus:ring-2 focus:ring-[var(--accent-primary)] focus:border-[var(--accent-primary)] transition">
                            </div>
                            <div>
                                <label for="event-date" class="block text-sm font-medium text-gray-300 mb-1">Date</label>
                                <input type="date" id="event-date" required class="w-full px-4 py-3 bg-gray-800 text-white border border-gray-600 rounded-lg focus:ring-2 focus:ring-[var(--accent-primary)] focus:border-[var(--accent-primary)] transition" style="color-scheme: dark;">
                            </div>
                            <div>
                                <label for="event-description" class="block text-sm font-medium text-gray-300 mb-1">Description</label>
                                <textarea id="event-description" rows="4" placeholder="Mention rules, skill level, what to bring, etc." class="w-full px-4 py-3 bg-gray-800 text-white border border-gray-600 rounded-lg focus:ring-2 focus:ring-[var(--accent-primary)] focus:border-[var(--accent-primary)] transition"></textarea>
                            </div>
                            <div>
                                <button type="submit" class="w-full bg-[var(--accent-primary)] text-white font-bold text-lg px-8 py-3 rounded-lg shadow-md hover:bg-green-500 transition-all duration-300 transform hover:scale-105">Create Event</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="profile-page" class="page">
            <div class="py-12 sm:py-16">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                        <img src="https://i.pravatar.cc/150?img=10" alt="User Avatar" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-[var(--accent-primary)] shadow-lg">
                        <h1 class="text-3xl font-bold text-white">Rohan Sharma</h1>
                        <p class="text-gray-400 mt-1">Hyderabad, Telangana</p>
                    </div>
                    <h2 class="text-2xl font-bold text-center mb-2 text-white">My Events</h2>
                    <p class="text-center text-gray-400 max-w-2xl mx-auto mb-8">Games you have RSVP'd to. Get ready to play!</p>
                    <div id="my-events-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                        <p class="sm:col-span-2 lg:col-span-3 text-center text-gray-500">You haven't joined any games yet. <a href="#" data-page="events-page" class="text-[var(--accent-primary)] font-semibold hover:underline">Find one now!</a></p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-black/50 mt-16">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="md:col-span-1">
                     <a href="#" data-page="home" class="block">
                         <img src="https://i.postimg.cc/rwFfPmXf/Picsart-25-07-17-13-57-44-788.jpg" alt="Vibekhel Logo" class="h-12 w-auto">
                    </a>
                    <p class="mt-2 text-gray-400 text-sm">India's #1 platform for connecting local sports players.</p>
                </div>
                <div>
                    <h4 class="font-semibold tracking-wider uppercase text-gray-400">Quick Links</h4>
                    <ul class="mt-4 space-y-2">
                        <li><a href="#" data-page="home" class="text-gray-300 hover:text-white transition">Home</a></li>
                        <li><a href="#" data-page="events-page" class="text-gray-300 hover:text-white transition">Find Games</a></li>
                        <li><a href="#" data-page="create-event-page" class="text-gray-300 hover:text-white transition">Organize</a></li>
                        <li><a href="#" data-page="profile-page" class="text-gray-300 hover:text-white transition">Profile</a></li>
                    </ul>
                </div>
                 <div>
                    <h4 class="font-semibold tracking-wider uppercase text-gray-400">Company</h4>
                    <ul class="mt-4 space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white transition">About Us</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white transition">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold tracking-wider uppercase text-gray-400">Follow Us</h4>
                    <div class="flex mt-4 space-x-6">
                        <a href="https://www.instagram.com/vibekhel/" target="_blank" class="text-gray-300 social-link transition-colors duration-200" aria-label="Instagram">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 012.153 2.153c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-2.153 2.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.013-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-2.153-2.153c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 012.153-2.153c.636-.247 1.363.416 2.427.465C9.53 2.013 9.884 2 12.315 2zM12 0C9.58 0 9.22.01 8.134.059 5.836.16 4.245.72 2.995 2.025c-1.29.95-1.885 2.545-1.985 4.835C1.01 8.079 1 8.433 1 11.985s.01 3.906.059 4.992c.1 2.29.695 3.885 1.985 4.835 1.25.96 2.84 1.525 5.135 1.625C9.22 23.99 9.58 24 12 24s2.78-.01 3.866-.059c2.29-.1 3.885-.665 5.135-1.625s1.885-2.545 1.985-4.835C22.99 15.89 23 15.435 23 11.985s-.01-3.906-.059-4.992c-.1-2.29-.695-3.885-1.985-4.835C19.71.72 18.12.16 15.824.06 14.738.01 14.38 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.88 1.44 1.44 0 000-2.88z" clip-rule="evenodd" />
                            </svg>
                        </a>
                        <a href="http://www.youtube.com/@Vibekhelcom" target="_blank" class="text-gray-300 social-link transition-colors duration-200" aria-label="YouTube">
                           <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.746 22 12 22 12s0 3.255-.418 4.814a2.506 2.506 0 01-1.768 1.768c-1.56.419-7.814.419-7.814.419s-6.255 0-7.814-.419a2.505 2.505 0 01-1.768-1.768C1 15.255 1 12 1 12s0-3.255.418-4.814a2.507 2.507 0 011.768-1.768C4.746 5 11 5 11 5s6.255 0 7.814.418zM9.5 15.584V8.416L15.5 12 9.5 15.584z" clip-rule="evenodd" />
                            </svg>
                        </a>
                        <a href="https://twitter.com/vibekhel_com" target="_blank" class="text-gray-300 social-link transition-colors duration-200" aria-label="X">
                           <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-gray-700 text-center text-gray-500 text-sm">
                <p>&copy; 2025 Vibekhel. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <nav class="sm:hidden fixed bottom-0 left-0 w-full bg-gray-900/80 backdrop-blur-lg border-t border-[var(--border-color)] z-40">
        <ul class="flex justify-around items-center h-16">
            <li>
                <a href="#" data-page="home" class="nav-link mobile-nav-link flex flex-col items-center text-gray-400 hover:text-[var(--accent-primary)] transition-colors duration-200 p-2 active">
                    <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                    <span class="text-xs">Home</span>
                </a>
            </li>
            <li>
                <a href="#" data-page="events-page" class="nav-link mobile-nav-link flex flex-col items-center text-gray-400 hover:text-[var(--accent-primary)] transition-colors duration-200 p-2">
                    <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    <span class="text-xs">Events</span>
                </a>
            </li>
            <li>
                <a href="#" data-page="create-event-page" class="nav-link mobile-nav-link flex flex-col items-center text-gray-400 hover:text-[var(--accent-primary)] transition-colors duration-200 p-2">
                    <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span class="text-xs">Create</span>
                </a>
            </li>
            <li>
                <a href="#" data-page="profile-page" class="nav-link mobile-nav-link flex flex-col items-center text-gray-400 hover:text-[var(--accent-primary)] transition-colors duration-200 p-2">
                    <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                    <span class="text-xs">Profile</span>
                </a>
            </li>
        </ul>
    </nav>

    <div id="event-detail-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
        <div id="modal-overlay" class="fixed inset-0 bg-black/80 backdrop-blur-sm"></div>
        <div id="modal-content" class="modal-content relative bg-[var(--bg-card)] w-full max-w-2xl max-h-[90vh] rounded-2xl shadow-xl flex flex-col border border-[var(--border-color)]">
            <div class="flex-shrink-0 px-6 py-4 flex justify-between items-center border-b border-[var(--border-color)]">
                <h2 id="modal-title-element" class="text-xl font-bold text-white"></h2>
                <button id="modal-close-btn" class="text-2xl text-gray-400 hover:text-white">&times;</button>
            </div>
            <div class="flex-grow p-6 overflow-y-auto">
                <div id="modal-banner" class="w-full h-48 sm:h-64 bg-gray-700 rounded-lg bg-cover bg-center mb-4"></div>
                <p id="modal-description" class="text-gray-300 mb-6"></p>
                <ul class="space-y-3">
                    <li class="flex items-center text-gray-300"><span class="text-[var(--accent-primary)] text-xl mr-3">📅</span><span id="modal-date"></span></li>
                    <li class="flex items-center text-gray-300"><span class="text-[var(--accent-primary)] text-xl mr-3">📍</span><span id="modal-location"></span></li>
                </ul>
            </div>
            <div class="flex-shrink-0 px-6 py-4 bg-black/30 rounded-b-2xl">
                <button id="rsvp-btn" class="w-full bg-[var(--accent-primary)] text-white font-bold text-lg px-8 py-3 rounded-lg shadow-md hover:bg-green-500 transition-all duration-300 transform hover:scale-105">RSVP - Join Game</button>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        let eventsData = [
            { id: 1, title: 'Weekend Cricket Showdown', sport: 'Cricket', location: 'NTR Stadium, Hyderabad', date: '2025-08-09', description: 'Join us for a friendly but competitive game of cricket. All skill levels welcome. Please bring your own gear if possible.', image: { webp: 'https://placehold.co/800x500/a2d9a5/4f4f4f.webp?text=Cricket+Match', jpg: 'https://placehold.co/800x500/a2d9a5/4f4f4f.jpg?text=Cricket+Match' } },
            { id: 2, title: 'Evening Football Match', sport: 'Football', location: 'Gachibowli Stadium, Hyderabad', date: '2025-08-09', description: 'Fast-paced 7-a-side football. We need a few more players to complete the teams. Bibs will be provided.', image: { webp: 'https://placehold.co/800x500/89c2d9/4f4f4f.webp?text=Football+Game', jpg: 'https://placehold.co/800x500/89c2d9/4f4f4f.jpg?text=Football+Game' } },
            { id: 3, title: 'Sunday Morning Badminton', sport: 'Badminton', location: 'PJR Indoor Stadium, Hyderabad', date: '2025-08-10', description: 'Doubles badminton session. We have courts booked for 2 hours. Please bring non-marking shoes.', image: { webp: 'https://placehold.co/800x500/f6eac2/4f4f4f.webp?text=Badminton', jpg: 'https://placehold.co/800x500/f6eac2/4f4f4f.jpg?text=Badminton' } },
            { id: 4, title: 'Friendly Volleyball Game', sport: 'Volleyball', location: 'Osmania University Ground', date: '2025-08-10', description: 'Casual volleyball match. Perfect for beginners and intermediate players looking to have some fun.', image: { webp: 'https://placehold.co/800x500/f5b994/4f4f4f.webp?text=Volleyball', jpg: 'https://placehold.co/800x500/f5b994/4f4f4f.jpg?text=Volleyball' } },
            { id: 5, title: 'Box Cricket Tournament', sport: 'Cricket', location: 'Turfside Arena, Madhapur', date: '2025-08-11', description: 'High-energy box cricket under the lights. Form your team of 6 or join as an individual.', image: { webp: 'https://placehold.co/800x500/a2d9a5/4f4f4f.webp?text=Box+Cricket', jpg: 'https://placehold.co/800x500/a2d9a5/4f4f4f.jpg?text=Box+Cricket' } },
            { id: 6, title: '5-a-side Football Fun', sport: 'Football', location: 'Hotfut, Begumpet', date: '2025-08-12', description: 'Quick-paced football on a turf pitch. Great for a cardio workout. Limited spots available.', image: { webp: 'https://placehold.co/800x500/89c2d9/4f4f4f.webp?text=5-a-side', jpg: 'https://placehold.co/800x500/89c2d9/4f4f4f.jpg?text=5-a-side' } }
        ];
        let myEvents = [];

        const mainContent = document.getElementById('main-content');
        const pages = document.querySelectorAll('.page');
        const allNavLinks = document.querySelectorAll('a[data-page]');
        const eventsGrid = document.getElementById('events-grid');
        const myEventsGrid = document.getElementById('my-events-grid');
        const filterBar = document.getElementById('filter-bar');
        const modal = document.getElementById('event-detail-modal');
        const modalOverlay = document.getElementById('modal-overlay');
        const modalContent = document.getElementById('modal-content');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const rsvpBtn = document.getElementById('rsvp-btn');
        const heroBg = document.querySelector('.hero-section-container::before');
        const ariaLiveRegion = document.getElementById('aria-live-region');
        let lastFocusedElement;

        function navigateTo(pageId) {
            const activePage = document.querySelector('.page.active');
            const targetPage = document.getElementById(pageId);
            if (!targetPage || (activePage && activePage.id === pageId)) return;

            pages.forEach(p => p.classList.remove('active'));
            targetPage.classList.add('active');
            
            allNavLinks.forEach(link => {
                const linkPage = link.dataset.page;
                if (linkPage === pageId) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });

            const pageTitle = targetPage.querySelector('h1, h2');
            if(pageTitle) {
                pageTitle.setAttribute('tabindex', '-1');
                pageTitle.focus();
            }
            
            ariaLiveRegion.textContent = `Mapsd to ${pageTitle ? pageTitle.textContent : pageId} page.`;

            window.scrollTo(0, 0);

            if (pageId === 'events-page') displayAllEvents();
            if (pageId === 'profile-page') displayMyEvents();
        }

        allNavLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                navigateTo(e.currentTarget.dataset.page);
            });
        });

        function createEventCard(event) {
            const card = document.createElement('div');
            card.className = 'event-card bg-[var(--bg-card)] rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-1 transition-all duration-300 cursor-pointer border border-[var(--border-color)]';
            card.dataset.eventId = event.id;
            card.setAttribute('tabindex', '0');

            card.innerHTML = `
                <div class="relative">
                    <picture>
                        <source type="image/webp" srcset="${event.image.webp.replace('800x500', '400x250')} 400w, ${event.image.webp} 800w">
                        <source type="image/jpeg" srcset="${event.image.jpg.replace('800x500', '400x250')} 400w, ${event.image.jpg} 800w">
                        <img loading="lazy" src="${event.image.jpg}" alt="${event.title}" class="w-full h-48 object-cover" width="400" height="250">
                    </picture>
                    <div class="absolute top-3 left-3 bg-black/50 backdrop-blur-sm text-[var(--accent-gold)] font-semibold text-xs px-3 py-1 rounded-full">${event.sport}</div>
                </div>
                <div class="p-5">
                    <h3 class="font-bold text-lg text-gray-100 mb-2 truncate">${event.title}</h3>
                    <p class="text-gray-400 text-sm flex items-center mb-1"><span class="mr-2">📅</span> ${new Date(event.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</p>
                    <p class="text-gray-400 text-sm flex items-center truncate"><span class="mr-2">📍</span> ${event.location}</p>
                </div>
            `;
            card.addEventListener('click', () => openModal(event));
            card.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    openModal(event);
                }
            });
            return card;
        }

        function displayAllEvents(filter = 'all') {
            eventsGrid.innerHTML = '';
            const filteredEvents = (filter === 'all') ? eventsData : eventsData.filter(event => event.sport === filter);
            if (filteredEvents.length === 0) {
                eventsGrid.innerHTML = `<p class="sm:col-span-2 lg:col-span-3 text-center text-gray-500">No ${filter !== 'all' ? filter : ''} games found. <a href="#" data-page="create-event-page" class="text-[var(--accent-primary)] font-semibold hover:underline">Organize one!</a></p>`;
                return;
            }
            filteredEvents.forEach(event => eventsGrid.appendChild(createEventCard(event)));
            gsap.from(".event-card", { duration: 0.5, autoAlpha: 0, y: 30, stagger: 0.05, ease: 'power3.out' });
        }

        function displayMyEvents() {
            myEventsGrid.innerHTML = '';
            if (myEvents.length === 0) {
                myEventsGrid.innerHTML = `<p class="sm:col-span-2 lg:col-span-3 text-center text-gray-500">You haven't joined any games yet. <a href="#" data-page="events-page" class="text-[var(--accent-primary)] font-semibold hover:underline">Find one now!</a></p>`;
                return;
            }
            myEvents.forEach(eventId => {
                const event = eventsData.find(e => e.id === eventId);
                if(event) myEventsGrid.appendChild(createEventCard(event));
            });
            gsap.from("#my-events-grid .event-card", { duration: 0.5, autoAlpha: 0, y: 30, stagger: 0.1, ease: 'power3.out' });
        }

        filterBar.addEventListener('click', (e) => {
            if (e.target.matches('button.filter-btn')) {
                filterBar.querySelector('.active').classList.remove('active');
                e.target.classList.add('active');
                displayAllEvents(e.target.dataset.filter);
            }
        });

        function openModal(event) {
            lastFocusedElement = document.activeElement;
            document.getElementById('modal-title-element').textContent = event.title;
            document.getElementById('modal-banner').style.backgroundImage = `url('${event.image.jpg}')`;
            document.getElementById('modal-description').textContent = event.description;
            document.getElementById('modal-date').textContent = new Date(event.date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('modal-location').textContent = event.location;
            
            rsvpBtn.dataset.eventId = event.id;
            if (myEvents.includes(event.id)) {
                rsvpBtn.textContent = 'Already Joined';
                rsvpBtn.disabled = true;
                rsvpBtn.classList.add('bg-gray-600', 'cursor-not-allowed');
                rsvpBtn.classList.remove('bg-[var(--accent-primary)]', 'hover:bg-green-500');
            } else {
                rsvpBtn.textContent = 'RSVP - Join Game';
                rsvpBtn.disabled = false;
                rsvpBtn.classList.remove('bg-gray-600', 'cursor-not-allowed');
                rsvpBtn.classList.add('bg-[var(--accent-primary)]', 'hover:bg-green-500');
            }

            modal.classList.remove('hidden');
            gsap.fromTo(modalOverlay, { autoAlpha: 0 }, { autoAlpha: 1, duration: 0.3 });
            gsap.fromTo(modalContent, { autoAlpha: 0, y: 50 }, { autoAlpha: 1, y: 0, duration: 0.3, ease: 'power2.out' });
            modalCloseBtn.focus();
        }

        function closeModal() {
            gsap.to(modalContent, { autoAlpha: 0, y: 50, duration: 0.3, ease: 'power2.in' });
            gsap.to(modalOverlay, { autoAlpha: 0, duration: 0.3, onComplete: () => {
                modal.classList.add('hidden');
                if (lastFocusedElement) lastFocusedElement.focus();
            }});
        }

        modalCloseBtn.addEventListener('click', closeModal);
        modalOverlay.addEventListener('click', closeModal);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                closeModal();
            }
            if (e.key === 'Tab' && !modal.classList.contains('hidden')) {
                const focusableElements = modalContent.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];

                if (e.shiftKey) {
                    if (document.activeElement === firstElement) {
                        lastElement.focus();
                        e.preventDefault();
                    }
                } else {
                    if (document.activeElement === lastElement) {
                        firstElement.focus();
                        e.preventDefault();
                    }
                }
            }
        });

        rsvpBtn.addEventListener('click', function() {
            const eventId = parseInt(this.dataset.eventId);
            if (!myEvents.includes(eventId)) {
                myEvents.push(eventId);
                this.textContent = 'Joined!';
                this.disabled = true;
                this.classList.add('bg-gray-600', 'cursor-not-allowed');
                this.classList.remove('bg-[var(--accent-primary)]', 'hover:bg-green-500');
                ariaLiveRegion.textContent = `Successfully joined the event.`;
                setTimeout(closeModal, 800);
            }
        });

        document.getElementById('create-event-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const newEvent = {
                id: Date.now(),
                title: document.getElementById('event-title').value,
                sport: document.getElementById('event-sport').value,
                location: document.getElementById('event-location').value,
                date: document.getElementById('event-date').value,
                description: document.getElementById('event-description').value,
                image: { webp: 'https://placehold.co/800x500/d1e7dd/4f4f4f.webp?text=New+Game', jpg: 'https://placehold.co/800x500/d1e7dd/4f4f4f.jpg?text=New+Game' }
            };
            eventsData.unshift(newEvent);
            e.target.reset();
            ariaLiveRegion.textContent = `Event "${newEvent.title}" created successfully.`;
            navigateTo('events-page');
        });

        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const bgElement = document.querySelector('.hero-section-container::before');
            if (bgElement) {
                gsap.to(bgElement, { y: scrollY * 0.4, ease: 'power1.out', duration: 0.5 });
            }
        });
        
        displayAllEvents();
        navigateTo('home');
    });
    </script>
</body>
</html>