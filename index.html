<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vibekhel - India‚Äôs Street Sports Community</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f5f5f5; color: #333; }
    header { background-color: #4CAF50; color: white; text-align: center; padding: 20px; }
    nav { background-color: #e0e0e0; padding: 10px; display: flex; justify-content: space-between; align-items: center; }
    nav a, nav button { margin: 0 10px; padding: 8px 16px; text-decoration: none; color: #333; background-color: #fff; border: 1px solid #4CAF50; border-radius: 5px; cursor: pointer; }
    nav button:hover, nav a:hover { background-color: #45a049; color: white; }
    .hero { background-color: #4CAF50; color: white; text-align: center; padding: 50px 20px; background-image: url('https://via.placeholder.com/1200x400'); background-size: cover; }
    .hero h1 { font-size: 2.5em; margin: 0; }
    .hero p { font-size: 1.2em; }
    .hero button { background-color: #fff; color: #4CAF50; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
    .hero button:hover { background-color: #e0e0e0; }
    .events { max-width: 800px; margin: 20px auto; padding: 20px; }
    .filters { display: flex; gap: 10px; margin-bottom: 20px; }
    .filters button { background-color: #4CAF50; color: white; border: none; padding: 5px 10px; border-radius: 5px; }
    .filters button.active { background-color: #45a049; }
    .filters input, .filters select { padding: 5px; }
    .event-card { background-color: white; border: 1px solid #ddd; border-radius: 5px; padding: 15px; margin-bottom: 15px; display: flex; align-items: center; }
    .event-card img { width: 100px; height: 100px; object-fit: cover; margin-right: 15px; }
    .event-card .details { flex-grow: 1; }
    .event-card .details h3 { margin: 0 0 5px; }
    .event-card .details p { margin: 5px 0; }
    .event-card .details .meta { color: #666; font-size: 0.9em; }
    .event-card button { background-color: #4CAF50; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
    .event-card button:hover { background-color: #45a049; }
    footer { background-color: #4CAF50; color: white; text-align: center; padding: 10px; position: relative; width: 100%; }
    footer p { margin: 5px 0; }
    footer a { color: white; margin: 0 10px; text-decoration: none; }
    footer a:hover { text-decoration: underline; }
    @media (max-width: 600px) {
      .filters { flex-direction: column; }
      .event-card { flex-direction: column; text-align: center; }
      .event-card img { margin-right: 0; margin-bottom: 10px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Vibekhel</h1>
  </header>
  <nav>
    <span>Vibekhel</span>
    <div>
      <a href="#events">Browse Events</a>
      <button onclick="addEvent()">Create Event</button>
      <button>Sign In</button>
    </div>
  </nav>
  <div class="hero">
    <h1>Join India‚Äôs Street Sports Revolution!</h1>
    <p>Connect with enthusiasts for gully cricket, kabaddi, chess, volleyball, and more.</p>
    <button>Find Events Near You</button>
  </div>
  <div class="events" id="events">
    <div class="filters">
      <button class="active" onclick="filterEvents('all')">All Sports</button>
      <button onclick="filterEvents('Cricket')">Cricket</button>
      <button onclick="filterEvents('Kabaddi')">Kabaddi</button>
      <button onclick="filterEvents('Chess')">Chess</button>
      <button onclick="filterEvents('Volleyball')">Volleyball</button>
      <input type="text" placeholder="Search events..." onkeyup="filterEvents('search', this.value)">
      <select onchange="filterEvents('date', this.value)">
        <option value="all">All Dates</option>
        <option value="2025-07-15">Today</option>
        <option value="2025-07-16">Tomorrow</option>
      </select>
    </div>
    <div id="eventList"></div>
  </div>
  <footer>
    <p>Vibekhel</p>
    <p>Connecting India‚Äôs street sports community, one game at a time.</p>
    <p>Quick Links: <a href="#about">About Us</a> | <a href="#how">How It Works</a> | <a href="#guidelines">Community Guidelines</a></p>
    <p>Support: <a href="#help">Help Center</a> | <a href="#contact">Contact Us</a> | <a href="#terms">Terms of Service</a></p>
    <p>Follow Us: <a href="https://youtube.com/@vibe-khel?si=BclsdaDT-Lvhptej" target="_blank">YouTube</a> | <a href="https://www.instagram.com/vibekhel?utm_source=qr&igsh=MjliaTlqMTVtMzc=" target="_blank">Instagram</a> | <a href="https://www.linkedin.com" target="_blank">LinkedIn</a> | <a href="https://x.com/Vibekhel?t=P7eO2PizXhDNeL9t1c3IYg&s=09" target="_blank">X (Twitter)</a></p>
    <p>&copy; 2025 Vibekhel. All rights reserved.</p>
  </footer>

  <script>
    async function loadEvents() {
      const response = await fetch('/.netlify/functions/get-events');
      const events = await response.json();
      displayEvents(events);
    }

    function displayEvents(events) {
      const eventList = document.getElementById('eventList');
      eventList.innerHTML = events.map(event => `
        <div class="event-card">
          <img src="https://via.placeholder.com/100" alt="${event.sport}">
          <div class="details">
            <h3>${event.sport} ${event.event_name || 'Event'}</h3>
            <p>Organized by ${event.organizer || 'Local Club'}</p>
            <p class="meta">üìç ${event.location} | üìÖ ${event.date} | ‚è∞ ${event.time} | üë• ${event.participants || '0'} participants</p>
            <button onclick="joinEvent(${event.event_id})">Join Event</button>
          </div>
        </div>
      `).join('');
    }

    function filterEvents(type, value = '') {
      fetch('/.netlify/functions/get-events')
        .then(response => response.json())
        .then(events => {
          let filtered = events;
          if (type !== 'all' && type !== 'search') {
            filtered = events.filter(e => e.sport.toLowerCase() === value.toLowerCase());
          } else if (type === 'search') {
            filtered = events.filter(e => e.location.toLowerCase().includes(value.toLowerCase()) || e.sport.toLowerCase().includes(value.toLowerCase()));
          } else if (type === 'date' && value !== 'all') {
            filtered = events.filter(e => e.date === value);
          }
          displayEvents(filtered);
          document.querySelectorAll('.filters button').forEach(btn => btn.classList.remove('active'));
          if (type !== 'search' && type !== 'date') document.querySelector(`button[onclick="filterEvents('${value}')"]`).classList.add('active');
        });
    }

    async function addEvent() {
      const sport = prompt('Enter sport (e.g., Cricket):');
      const location = prompt('Enter location (e.g., Hyderabad):');
      const date = prompt('Enter date (YYYY-MM-DD, e.g., 2025-07-15):');
      const time = prompt('Enter time (HH:MM, e.g., 14:00):');
      const organizer = prompt('Enter organizer (e.g., Local Club):');
      const participants = prompt('Enter number of participants (e.g., 24):');
      if (sport && location && date && time) {
        await fetch('/.netlify/functions/add-event', {
          method: 'POST',
          body: JSON.stringify({ sport, location, date, time, organizer, participants }),
          headers: { 'Content-Type': 'application/json' },
        });
        loadEvents();
      } else {
        alert('Please fill all required fields!');
      }
    }

    function joinEvent(eventId) {
      alert(`Joined event ID: ${eventId}! (Feature to be implemented)`);
    }

    // Load events on page load
    loadEvents();
  </script>
</body>
</html>